<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Arduino Documentation: Arduino Code/fullcounter.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="no Background tamu seal.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Arduino Documentation
   </div>
   <div id="projectbrief">Documentation for the Arduino Code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_73350b4de4dbf21468c8591efc04d931.html">Arduino Code</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fullcounter.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class is the code that is run on the Arduino. This file sets up the lcd screen that is used to setup the box when it is deployed, and has the implementation for setting which lot is being recorded at deployment. But most importantly, it is the code that actually uses the sensor to record whether or not a car has passed the sensor. It sends this information to the Raspberry Pi which then sends the information to the database.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;Wire.h&gt;</code><br />
<code>#include &lt;LiquidCrystal_I2C.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a69505b97a794563ba4b6cd7c11af7f55"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a69505b97a794563ba4b6cd7c11af7f55"></a>
LiquidCrystal_I2C&#160;</td><td class="memItemRight" valign="bottom"><b>lcd</b> (0x27, 2, 1, 0, 4, 5, 6, 7, 3, POSITIVE)</td></tr>
<tr class="separator:a69505b97a794563ba4b6cd7c11af7f55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fullcounter_8c.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:a4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup function which initializes the LCD and sets the modes for all necessary pins.  <a href="#a4fc01d736fe50cf5b977f755b675f11d">More...</a><br /></td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fullcounter_8c.html#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:afe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main loop function which either sets the lot number or reads from the sensors depending on the state of the switch.  <a href="#afe461d27b9c48d5921c00d521181f12f">More...</a><br /></td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad40ccf803c2eff76d7e0e7a24c9937ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fullcounter_8c.html#ad40ccf803c2eff76d7e0e7a24c9937ef">readSensors</a> ()</td></tr>
<tr class="memdesc:ad40ccf803c2eff76d7e0e7a24c9937ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function reads from the sensors and sends a signal to the serial port for each entry/exit. LEDs for each sensor are activated when motion is detected.  <a href="#ad40ccf803c2eff76d7e0e7a24c9937ef">More...</a><br /></td></tr>
<tr class="separator:ad40ccf803c2eff76d7e0e7a24c9937ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c5d11d052a516d663e9571db041bf2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fullcounter_8c.html#a2c5d11d052a516d663e9571db041bf2b">setLotNum</a> ()</td></tr>
<tr class="memdesc:a2c5d11d052a516d663e9571db041bf2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets the parking lot number to be used in the database. It uses 2 buttons to set the lot number and a switch to set or "unset" the current lot.  <a href="#a2c5d11d052a516d663e9571db041bf2b">More...</a><br /></td></tr>
<tr class="separator:a2c5d11d052a516d663e9571db041bf2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4f40099c2dd0645b871e53ce0700370b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4f40099c2dd0645b871e53ce0700370b"></a>
const int&#160;</td><td class="memItemRight" valign="bottom"><b>button1Pin</b> = 4</td></tr>
<tr class="separator:a4f40099c2dd0645b871e53ce0700370b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73a6345a84cc3b11e164dbcace03472a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a73a6345a84cc3b11e164dbcace03472a"></a>
const int&#160;</td><td class="memItemRight" valign="bottom"><b>button2Pin</b> = 5</td></tr>
<tr class="separator:a73a6345a84cc3b11e164dbcace03472a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae852fd421ef56bdabc19d7fa7608d90"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aae852fd421ef56bdabc19d7fa7608d90"></a>
const int&#160;</td><td class="memItemRight" valign="bottom"><b>switchPin</b> = 6</td></tr>
<tr class="separator:aae852fd421ef56bdabc19d7fa7608d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a789de85fb265c629ec268428d3d75e62"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a789de85fb265c629ec268428d3d75e62"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>btn1State</b> = 0</td></tr>
<tr class="separator:a789de85fb265c629ec268428d3d75e62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a343ea36fbb01094d3a05d06fc9090a3c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a343ea36fbb01094d3a05d06fc9090a3c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>btn2State</b> = 0</td></tr>
<tr class="separator:a343ea36fbb01094d3a05d06fc9090a3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2320420c7cb57f65875a6e3bb8b20ee"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae2320420c7cb57f65875a6e3bb8b20ee"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>prevBtn1</b> = 0</td></tr>
<tr class="separator:ae2320420c7cb57f65875a6e3bb8b20ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3d0907eed1d3583419b83036d3e7fd6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab3d0907eed1d3583419b83036d3e7fd6"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>prevBtn2</b> = 0</td></tr>
<tr class="separator:ab3d0907eed1d3583419b83036d3e7fd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57e4ea129f0c267bf3209ac1ee9df821"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a57e4ea129f0c267bf3209ac1ee9df821"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>switchState</b> = 0</td></tr>
<tr class="separator:a57e4ea129f0c267bf3209ac1ee9df821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d92a78a619f74822fd67b1d8837d7bc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9d92a78a619f74822fd67b1d8837d7bc"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>prevSwState</b> = 0</td></tr>
<tr class="separator:a9d92a78a619f74822fd67b1d8837d7bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d96090337e6c2cfdf0f5cfe42e8000b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5d96090337e6c2cfdf0f5cfe42e8000b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>lotNum</b> = 0</td></tr>
<tr class="separator:a5d96090337e6c2cfdf0f5cfe42e8000b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22e5c9570b48a859b955e24a0faee901"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a22e5c9570b48a859b955e24a0faee901"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tens</b> = 0</td></tr>
<tr class="separator:a22e5c9570b48a859b955e24a0faee901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b9280dfa921e564598c3ee2058fcec9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9b9280dfa921e564598c3ee2058fcec9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>ones</b> = 0</td></tr>
<tr class="separator:a9b9280dfa921e564598c3ee2058fcec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdaa5454f7f1a66e1d4b85a1b7427d5b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acdaa5454f7f1a66e1d4b85a1b7427d5b"></a>
char&#160;</td><td class="memItemRight" valign="bottom"><b>lotNumBuf</b> [16]</td></tr>
<tr class="separator:acdaa5454f7f1a66e1d4b85a1b7427d5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a290f075ae1042b9c9e770173d986c760"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a290f075ae1042b9c9e770173d986c760"></a>
char&#160;</td><td class="memItemRight" valign="bottom"><b>serialBuf</b> [10]</td></tr>
<tr class="separator:a290f075ae1042b9c9e770173d986c760"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdd77f1aa3023f9ba5f49bb1f6c68b51"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afdd77f1aa3023f9ba5f49bb1f6c68b51"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>ledPin</b> = 13</td></tr>
<tr class="separator:afdd77f1aa3023f9ba5f49bb1f6c68b51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebb9679f02c2142093d8152c0664d87e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aebb9679f02c2142093d8152c0664d87e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>ledPin2</b> = 12</td></tr>
<tr class="separator:aebb9679f02c2142093d8152c0664d87e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeaaa8e55dcdd7f6f5cc728ffdd54156"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaeaaa8e55dcdd7f6f5cc728ffdd54156"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>inputPin1</b> = 2</td></tr>
<tr class="separator:aaeaaa8e55dcdd7f6f5cc728ffdd54156"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdf149d29320014da890b5dfdd157b9b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abdf149d29320014da890b5dfdd157b9b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>inputPin2</b> = 3</td></tr>
<tr class="separator:abdf149d29320014da890b5dfdd157b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55dff8e63959fc233e6f3158d303c48f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a55dff8e63959fc233e6f3158d303c48f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>pirState</b> = LOW</td></tr>
<tr class="separator:a55dff8e63959fc233e6f3158d303c48f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbc714ce2fd44e2341e568f9abfd1983"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abbc714ce2fd44e2341e568f9abfd1983"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>pirState2</b> = LOW</td></tr>
<tr class="separator:abbc714ce2fd44e2341e568f9abfd1983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0ccb5ee6d882ee3605ff47745c6467b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa0ccb5ee6d882ee3605ff47745c6467b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>val</b> = 0</td></tr>
<tr class="separator:aa0ccb5ee6d882ee3605ff47745c6467b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc3748d7169a359b540e60b40b6a8956"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acc3748d7169a359b540e60b40b6a8956"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>val2</b> = 0</td></tr>
<tr class="separator:acc3748d7169a359b540e60b40b6a8956"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2d3c5f9d45188786bd6c62b4a1de2d9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae2d3c5f9d45188786bd6c62b4a1de2d9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>hit1</b> = 0</td></tr>
<tr class="separator:ae2d3c5f9d45188786bd6c62b4a1de2d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e4751a4da4c6b6bcedeea1988ede98a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8e4751a4da4c6b6bcedeea1988ede98a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>hit2</b> = 0</td></tr>
<tr class="separator:a8e4751a4da4c6b6bcedeea1988ede98a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a639e65bbd749de17060d658eb233f72b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a639e65bbd749de17060d658eb233f72b"></a>
unsigned long&#160;</td><td class="memItemRight" valign="bottom"><b>timeout</b></td></tr>
<tr class="separator:a639e65bbd749de17060d658eb233f72b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class is the code that is run on the Arduino. This file sets up the lcd screen that is used to setup the box when it is deployed, and has the implementation for setting which lot is being recorded at deployment. But most importantly, it is the code that actually uses the sensor to record whether or not a car has passed the sensor. It sends this information to the Raspberry Pi which then sends the information to the database. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="afe461d27b9c48d5921c00d521181f12f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main loop function which either sets the lot number or reads from the sensors depending on the state of the switch. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="ad40ccf803c2eff76d7e0e7a24c9937ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void readSensors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function reads from the sensors and sends a signal to the serial port for each entry/exit. LEDs for each sensor are activated when motion is detected. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a2c5d11d052a516d663e9571db041bf2b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setLotNum </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets the parking lot number to be used in the database. It uses 2 buttons to set the lot number and a switch to set or "unset" the current lot. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a4fc01d736fe50cf5b977f755b675f11d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup function which initializes the LCD and sets the modes for all necessary pins. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
